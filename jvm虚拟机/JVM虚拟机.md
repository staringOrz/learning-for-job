# JVM虚拟机

java xxx---->装载配置--->根据配置寻找JVM.dll--->初始化JVM获取JNEnv接口（findclass等操作通过它JNEnv接口实现）--->找到main方法并执行

---

![JVM基本结构](/JVM基本结构.jpg)

## 方法区

-  **保存装载的类信息**
-  常量池
-  静态变量，方法信息
-  方法字节码
-  **通常和永久区（Perm）关联在一起**

## Java堆

- 和程序开发密切相关

- 应用系统对象都保存在Java堆中

- 所有线程共享Java堆

- 对分代GC来说，堆也是分代的

- GC的主要工作区间

  ![GC工作区间](/GC工作区间.jpg)

## Java栈

- 线程私有
- 栈由一系列帧组成（因此Java栈也叫帧栈）
- 帧保存一个方法的局部变量、操作数栈、常量池指针
- 每给方法调用创建一个帧，并压栈

### 有序性

- 在本线程内，操作都是有序的
- 在线程外观察，操作都说无序的

### 指令重排

- 线程内串行化
- 破环线程间的有序性

## 解释执行

- 解释执行以解释方式运行字节码
- 解释执行的意思是：读一句执行一句

## 编译执行（JIT）

- 将字节码编译成字节码
- 直接执行机器码
- 运行时编译
- 编译后性能有数量级的提升